'use strict';

var _webpackMd5Hash = require('webpack-md5-hash');

var _webpackMd5Hash2 = _interopRequireDefault(_webpackMd5Hash);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const isVendor = ({ userRequest }) => userRequest && userRequest.indexOf('node_modules') >= 0 && userRequest.match(/\.js$/);

/**
 * Returns a webpack block that splits vendor javascript bundle.
 */

const splitVendor = (name = 'vendor') => ({ webpack }) => ({
  output: {
    filename: '[name].[chunkhash].js'
  },
  plugins: [new webpack.optimize.CommonsChunkPlugin({
    minChunks: isVendor,
    name
  }), new _webpackMd5Hash2.default()]
});

module.exports = splitVendor;